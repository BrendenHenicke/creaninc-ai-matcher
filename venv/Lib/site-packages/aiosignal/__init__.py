<<<<<<< HEAD
from frozenlist import FrozenList

__version__ = "1.3.2"
=======
import sys
from typing import Any, Awaitable, Callable, TypeVar

from frozenlist import FrozenList

if sys.version_info >= (3, 11):
    from typing import Unpack
else:
    from typing_extensions import Unpack

if sys.version_info >= (3, 13):
    from typing import TypeVarTuple
else:
    from typing_extensions import TypeVarTuple

_T = TypeVar("_T")
_Ts = TypeVarTuple("_Ts", default=Unpack[tuple[()]])

__version__ = "1.4.0"
>>>>>>> 10771d2d (Initial commit for Crean AI Matcher full app)

__all__ = ("Signal",)


<<<<<<< HEAD
class Signal(FrozenList):
=======
class Signal(FrozenList[Callable[[Unpack[_Ts]], Awaitable[object]]]):
>>>>>>> 10771d2d (Initial commit for Crean AI Matcher full app)
    """Coroutine-based signal implementation.

    To connect a callback to a signal, use any list method.

    Signals are fired using the send() coroutine, which takes named
    arguments.
    """

    __slots__ = ("_owner",)

<<<<<<< HEAD
    def __init__(self, owner):
        super().__init__()
        self._owner = owner

    def __repr__(self):
=======
    def __init__(self, owner: object):
        super().__init__()
        self._owner = owner

    def __repr__(self) -> str:
>>>>>>> 10771d2d (Initial commit for Crean AI Matcher full app)
        return "<Signal owner={}, frozen={}, {!r}>".format(
            self._owner, self.frozen, list(self)
        )

<<<<<<< HEAD
    async def send(self, *args, **kwargs):
=======
    async def send(self, *args: Unpack[_Ts], **kwargs: Any) -> None:
>>>>>>> 10771d2d (Initial commit for Crean AI Matcher full app)
        """
        Sends data to all registered receivers.
        """
        if not self.frozen:
            raise RuntimeError("Cannot send non-frozen signal.")

        for receiver in self:
<<<<<<< HEAD
            await receiver(*args, **kwargs)  # type: ignore
=======
            await receiver(*args, **kwargs)

    def __call__(
        self, func: Callable[[Unpack[_Ts]], Awaitable[_T]]
    ) -> Callable[[Unpack[_Ts]], Awaitable[_T]]:
        """Decorator to add a function to this Signal."""
        self.append(func)
        return func
>>>>>>> 10771d2d (Initial commit for Crean AI Matcher full app)
